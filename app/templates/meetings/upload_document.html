{% extends "base.html" %}

{% block title %}{{ _('Upload Document') }} - {{ meeting.title }}{% endblock %}

{% block content %}
<div class="container mt-5">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('meeting.meetings_list') }}">{{ _('Meetings') }}</a></li>
            <li class="breadcrumb-item"><a href="{{ url_for('meeting.meeting_detail', meeting_id=meeting.id) }}">{{ meeting.title }}</a></li>
            <li class="breadcrumb-item"><a href="{{ url_for('meeting_document.list_documents', meeting_id=meeting.id) }}">{{ _('Documents') }}</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ _('Upload') }}</li>
        </ol>
    </nav>

    <div class="card">
        <div class="card-header">
            <h2>{{ _('Upload Document') }}</h2>
        </div>
        <div class="card-body">
            <form method="post" enctype="multipart/form-data">
                <div class="mb-3">
                    <label for="name" class="form-label">{{ _('Document Name') }} *</label>
                    <input type="text" class="form-control" id="name" name="name" required>
                    <div class="form-text">{{ _('Choose a descriptive name for the document') }}</div>
                </div>
                
                <div class="mb-3">
                    <label for="description" class="form-label">{{ _('Description') }}</label>
                    <textarea class="form-control" id="description" name="description" rows="3"></textarea>
                    <div class="form-text">{{ _('Optional description of the document contents') }}</div>
                </div>
                
                <div class="mb-3">
                    <label for="file" class="form-label">{{ _('Select File') }} *</label>
                    <input type="file" class="form-control" id="file" name="file" required>
                    <div class="form-text">{{ _('Maximum file size: 10MB') }}</div>
                </div>
                
                <div class="mb-3 form-check">
                    <input type="checkbox" class="form-check-input" id="is_public" name="is_public">
                    <label class="form-check-label" for="is_public">{{ _('Make document visible to all members') }}</label>
                    <div class="form-text">{{ _('If unchecked, only founders will be able to see this document') }}</div>
                </div>
                
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <a href="{{ url_for('meeting_document.list_documents', meeting_id=meeting.id) }}" class="btn btn-secondary">
                        {{ _('Cancel') }}
                    </a>
                    <button type="submit" class="btn btn-primary">{{ _('Upload Document') }}</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Basic client-side validation
    document.querySelector('form').addEventListener('submit', function(e) {
        const fileInput = document.getElementById('file');
        const maxSize = 10 * 1024 * 1024; // 10MB
        
        if (fileInput.files.length > 0) {
            const fileSize = fileInput.files[0].size;
            if (fileSize > maxSize) {
                e.preventDefault();
                alert('{{ _("File is too large. Maximum size is 10MB.") }}');
            }
        }
    });
</script>
{% endblock %}
