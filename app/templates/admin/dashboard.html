{% extends "base.html" %}
{% block title %}Адмін-дешборд{% endblock %}
{% block content %}
<h2>Адмін-дешборд</h2>
<hr>
<h3>Користувачі</h3>
<ul>
  {% for user in users %}
    <li>{{ user.email }} {% if user.is_admin %}(адмін){% endif %} {% if user.is_blocked %}<span style="color:red;">[заблоковано]</span>{% endif %}
      {% if not user.is_admin %}
        <form method="post" action="{{ url_for('admin.toggle_block_user', user_id=user.id) }}" style="display:inline;">
          <button type="submit">{% if user.is_blocked %}Розблокувати{% else %}Заблокувати{% endif %}</button>
        </form>
      {% endif %}
    </li>
  {% endfor %}
</ul>
<hr>
<h3>Блоки на головній</h3>
<a href="{{ url_for('admin.create_block') }}">+ Додати блок</a>
<ul>
  {% for block in blocks %}
    <li>{{ block.title }} ({{ block.type }})
      <a href="{{ url_for('admin.edit_block', block_id=block.id) }}">Редагувати</a>
      <form method="post" action="{{ url_for('admin.delete_block', block_id=block.id) }}" style="display:inline;">
        <button type="submit" onclick="return confirm('Видалити блок?');">Видалити</button>
      </form>
    </li>
  {% endfor %}
</ul>
<hr>
<h3>Галерея</h3>
<a href="{{ url_for('admin.add_gallery_image') }}">+ Додати фото</a>
<ul>
  {% for img in gallery %}
    <li><img src="{{ img.image_url }}" alt="" width="80"> {{ img.description }}
      <form method="post" action="{{ url_for('admin.delete_gallery_image', image_id=img.id) }}" style="display:inline;">
        <button type="submit" onclick="return confirm('Видалити фото?');">Видалити</button>
      </form>
    </li>
  {% endfor %}
</ul>
<hr>
<h3>Проекти</h3>
<ul>
  {% for project in projects %}
    <li>{{ project.title }} ({{ project.status }})</li>
  {% endfor %}
</ul>
<hr>
<h3>Соцмережі</h3>
<p>Facebook: {{ settings.facebook if settings else '' }}<br>Instagram: {{ settings.instagram if settings else '' }}<br>Telegram: {{ settings.telegram if settings else '' }}<br>Email: {{ settings.email if settings else '' }}</p>
<hr>
<h3>Звіти</h3>
<ul>
  {% for report in reports %}
    <li>{{ report.title }} ({{ report.created_at.strftime('%Y-%m-%d') }})</li>
  {% endfor %}
</ul>
{% endblock %} 